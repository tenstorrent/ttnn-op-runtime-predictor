import argparse
from create_dataset_eltwise_unary import create_dataset_eltwise_unary

def determine_op_category(op_name):
    #add op names here as needed
    op_category = ""
    if op_name == "exp":
        op_category = "eltwise_unary"
    elif op_name == "add":
        op_category = "eltwise_binary"
    else:
        op_category = "None"
    
    return op_category

def main(op_name, op_category, sweep_vectors, sweep_results):

    #add op categories here as needed
    if op_category is None:
        op_category = determine_op_category(op_name)
    
    if op_category == "eltwise_unary":
        create_dataset_eltwise_unary(op_name, sweep_vectors, sweep_results)
    else:
        print(f"op category {op_category} not yet supported.")
        

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Create dataset for an op using sweep framework output .json files.")
    parser.add_argument(
        "--op_name", required=True, help="Specify op name."
    )
    parser.add_argument(
        "--op_category", required=False, help="Specify op category."
    )
    parser.add_argument(
        "--sweep_vectors", required=True, help="Specify sweep vector .json file generated by sweeps_parameter_generator.py."
    )
    parser.add_argument(
        "--sweep_results", required=True, help="Specify results of sweep .json file generated by sweeps_runner.py."
    )
    args = parser.parse_args()
    main(args.op_name, args.op_category, args.sweep_vectors, args.sweep_results)